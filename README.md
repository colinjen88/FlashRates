# FlashRates - é«˜é »åŒ¯ç‡æ•¸æ“šèšåˆç³»çµ± v2.0

[![Status](https://img.shields.io/badge/status-active-success.svg)]()
[![Python](https://img.shields.io/badge/python-3.11+-blue.svg)]()
[![React](https://img.shields.io/badge/react-18+-61DAFB.svg)]()

**å³æ™‚ç›£æ§é»ƒé‡‘ (XAU)ã€ç™½éŠ€ (XAG) èˆ‡ç¾å…ƒåŒ¯ç‡ (USD/TWD) çš„é«˜é »æ•¸æ“šèšåˆå¹³å°ã€‚**

æ¡ç”¨ã€Œåˆ†æ•£å¼æ¡é›†ã€ä¸­å¿ƒåŒ–èšåˆã€æ¨¡å¼ï¼Œå¾ 10 å€‹ç•°æ§‹æ•¸æ“šæºåŒæ­¥æŠ“å–å ±åƒ¹ï¼Œå¯¦ç¾äºç§’ç´šæ›´æ–°ã€‚

---

## ğŸ“‹ ç›®éŒ„

- [ç³»çµ±æ¶æ§‹](#ç³»çµ±æ¶æ§‹)
- [å¿«é€Ÿé–‹å§‹](#å¿«é€Ÿé–‹å§‹)
- [å°ˆæ¡ˆçµæ§‹](#å°ˆæ¡ˆçµæ§‹)
- [å¾Œç«¯ API](#å¾Œç«¯-api)
- [æ•¸æ“šæºé…ç½®](#æ•¸æ“šæºé…ç½®)
- [å‰ç«¯åŠŸèƒ½](#å‰ç«¯åŠŸèƒ½)
- [é…ç½®èªªæ˜](#é…ç½®èªªæ˜)
- [é–‹ç™¼æŒ‡å—](#é–‹ç™¼æŒ‡å—)

---

## ğŸ—ï¸ ç³»çµ±æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         FlashRates ç³»çµ±æ¶æ§‹                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Binance    â”‚  â”‚ GoldPrice   â”‚  â”‚    Sina     â”‚  â”‚   Yahoo    â”‚  â”‚
â”‚  â”‚  (PAXG)     â”‚  â”‚   .org      â”‚  â”‚  Finance    â”‚  â”‚  Finance   â”‚  â”‚
â”‚  â”‚  0.5s/æ¬¡    â”‚  â”‚  10s/æ¬¡     â”‚  â”‚   3s/æ¬¡     â”‚  â”‚  60s/æ¬¡    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚                â”‚                â”‚               â”‚         â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                   â–¼                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    Scheduler (æ’ç¨‹å™¨)                         â”‚   â”‚
â”‚  â”‚   â€¢ æ™‚é–“åˆ†ç‰‡è¼ªè©¢ (Staggered Polling)                          â”‚   â”‚
â”‚  â”‚   â€¢ å„ä¾†æºç¨ç«‹é–“éš”èˆ‡åç§»é‡                                     â”‚   â”‚
â”‚  â”‚   â€¢ Circuit Breaker ç†”æ–·æ©Ÿåˆ¶                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                               â–¼                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    Aggregator (èšåˆå¼•æ“)                       â”‚   â”‚
â”‚  â”‚   â€¢ åŠ æ¬Šå¹³å‡è¨ˆç®— (Binance: 0.8, çˆ¬èŸ²: 0.4-0.6)                 â”‚   â”‚
â”‚  â”‚   â€¢ ç•°å¸¸å€¼éæ¿¾ (åé›¢ä¸­ä½æ•¸ > 0.3% è‡ªå‹•å‰”é™¤)                    â”‚   â”‚
â”‚  â”‚   â€¢ ä¾†æºæ­¸å› è¿½è¹¤                                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                               â–¼                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                Redis (FakeRedis å‚™é¸)                         â”‚   â”‚
â”‚  â”‚   â€¢ PubSub: market:stream:{symbol}                           â”‚   â”‚
â”‚  â”‚   â€¢ Cache: market:latest:{symbol}                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                      â”‚                  â”‚                           â”‚
â”‚           WebSocket â–¼         REST API â–¼                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    FastAPI (:8000)                            â”‚   â”‚
â”‚  â”‚   â€¢ GET /api/v1/latest?symbols=xau-usd,xag-usd               â”‚   â”‚
â”‚  â”‚   â€¢ WS  /ws/stream                                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                               â–¼                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                React Frontend (:7000)                         â”‚   â”‚
â”‚  â”‚   â€¢ å³æ™‚çœ‹æ¿ (Dashboard)                                      â”‚   â”‚
â”‚  â”‚   â€¢ API æ–‡æª” (Docs)                                          â”‚   â”‚
â”‚  â”‚   â€¢ åƒ¹æ ¼å¡ç‰‡ + ä¾†æºæ­¸å›                                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ å¿«é€Ÿé–‹å§‹

### ç’°å¢ƒéœ€æ±‚

- Python 3.11+
- Node.js 18+
- Redis (å¯é¸ï¼Œç³»çµ±è‡ªå‹•ä½¿ç”¨ FakeRedis ä½œç‚ºå‚™é¸)

### å®‰è£èˆ‡å•Ÿå‹•

```bash
# 1. å®‰è£å¾Œç«¯ä¾è³´
cd backend
pip install fastapi uvicorn redis pydantic-settings aiohttp fakeredis

# 2. å•Ÿå‹•å¾Œç«¯ (Port 8000)
python -m uvicorn backend.main:app --reload --port 8000

# 3. å®‰è£å‰ç«¯ä¾è³´
cd frontend
npm install

# 4. å•Ÿå‹•å‰ç«¯ (Port 7000)
npm run dev
```

### è¨ªå•åœ°å€

| æœå‹™       | URL                                  | èªªæ˜         |
| ---------- | ------------------------------------ | ------------ |
| å‰ç«¯å„€è¡¨æ¿ | http://localhost:7000                | å³æ™‚ç›£æ§ä»‹é¢ |
| å¾Œç«¯ API   | http://localhost:8000                | REST API     |
| WebSocket  | ws://localhost:8000/ws/stream        | å¯¦æ™‚æ•¸æ“šæ¨é€ |
| Metrics    | http://localhost:8000/api/v1/metrics | æœå‹™ç›£æ§æŒ‡æ¨™ |
| API æ–‡æª”   | http://localhost:8000/docs           | Swagger UI   |

---

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```
FlashRates/
â”œâ”€â”€ ğŸ“‚ backend/                    # å¾Œç«¯ Python æœå‹™
â”‚   â”œâ”€â”€ ğŸ“‚ sources/                # æ•¸æ“šæºé€£æ¥å™¨
â”‚   â”‚   â”œâ”€â”€ base.py               # æŠ½è±¡åŸºé¡
â”‚   â”‚   â”œâ”€â”€ binance.py            # Binance PAXG (é«˜é »)
â”‚   â”‚   â”œâ”€â”€ goldprice.py          # GoldPrice.org JSON API
â”‚   â”‚   â”œâ”€â”€ sina.py               # æ–°æµªè²¡ç¶“
â”‚   â”‚   â”œâ”€â”€ bullionvault.py       # BullionVault XML API
â”‚   â”‚   â”œâ”€â”€ yahoo.py              # Yahoo Finance
â”‚   â”‚   â”œâ”€â”€ kitco.py              # Kitco HTML çˆ¬èŸ²
â”‚   â”‚   â”œâ”€â”€ investing.py          # Investing.com (Playwright)
â”‚   â”‚   â””â”€â”€ mock.py               # Mock æ¸¬è©¦æ•¸æ“šæº
â”‚   â”œâ”€â”€ aggregator.py             # èšåˆå¼•æ“ (åŠ æ¬Šå¹³å‡ + ç•°å¸¸å€¼éæ¿¾)
â”‚   â”œâ”€â”€ scheduler.py              # èª¿åº¦å™¨ (æ™‚é–“åˆ†ç‰‡)
â”‚   â”œâ”€â”€ circuit_breaker.py        # ç†”æ–·å™¨
â”‚   â”œâ”€â”€ redis_client.py           # Redis å®¢æˆ¶ç«¯ (å« FakeRedis å‚™é¸)
â”‚   â”œâ”€â”€ config.py                 # é…ç½®è¼‰å…¥å™¨
â”‚   â””â”€â”€ main.py                   # FastAPI å…¥å£é»
â”‚
â”œâ”€â”€ ğŸ“‚ frontend/                   # å‰ç«¯ React æ‡‰ç”¨
â”‚   â”œâ”€â”€ ğŸ“‚ src/
â”‚   â”‚   â”œâ”€â”€ App.jsx               # ä¸»æ‡‰ç”¨çµ„ä»¶
â”‚   â”‚   â”œâ”€â”€ index.css             # Tailwind CSS
â”‚   â”‚   â””â”€â”€ main.jsx              # React å…¥å£é»
â”‚   â”œâ”€â”€ vite.config.js            # Vite é…ç½® (Port 7000)
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ ğŸ“‚ tests/                      # æ¸¬è©¦
â”‚   â””â”€â”€ test_system.py            # å–®å…ƒæ¸¬è©¦ (Circuit Breaker, Aggregator)
â”‚
â”œâ”€â”€ index.jsx                      # åŸå§‹å‰ç«¯åŸå‹ (å‚™ä»½)
â”œâ”€â”€ é«˜é »åŒ¯ç‡æ•¸æ“šèšåˆç³»çµ±_v2.md      # åŸå§‹è¦æ ¼æ–‡ä»¶
â””â”€â”€ README.md                      # æœ¬æ–‡ä»¶
```

---

## ğŸ”Œ å¾Œç«¯ API

### REST API

#### `GET /api/v1/latest`

ç²å–æœ€æ–°åŒ¯ç‡æ•¸æ“šã€‚

**èªè­‰æ–¹å¼ï¼š**

- Header: `X-API-Key: <YOUR_API_KEY>`
- æˆ– `Authorization: Bearer <YOUR_API_KEY>`
  > è‹¥æœªè¨­å®š `API_KEYS`ï¼Œå‰‡ä¸å¼·åˆ¶é©—è­‰ï¼ˆé–‹ç™¼ç’°å¢ƒé è¨­ï¼‰ã€‚

**é »ç‡é™åˆ¶ï¼š**

- é è¨­æ¯åˆ†é˜ 120 æ¬¡ + 30 æ¬¡çªç™¼é¡åº¦ï¼ˆå¯åœ¨ç’°å¢ƒè®Šæ•¸èª¿æ•´ï¼‰

### API Key ç®¡ç†

æä¾›æœ¬æ©Ÿç”¢ç”Ÿå·¥å…·ï¼Œå¿«é€Ÿå»ºç«‹å¤šçµ„ API Keyï¼š

```
python backend/tools/api_key_tool.py --count 3 --length 32 --prefix fr_
```

è¼¸å‡ºçµæœæœƒåŒ…å«å»ºè­°çš„ `.env` è¨­å®šè¡Œï¼š

```
API_KEYS=fr_xxx,fr_yyy,fr_zzz
```

**è«‹æ±‚åƒæ•¸ï¼š**
| åƒæ•¸ | é¡å‹ | èªªæ˜ |
|------|------|------|
| symbols | string | é€—è™Ÿåˆ†éš”çš„ä»£ç¢¼ (ä¾‹: `xau-usd,xag-usd,usd-twd`) |

**å›æ‡‰ç¯„ä¾‹ï¼š**

```json
{
  "timestamp": 1705500000.123,
  "data": {
    "XAU-USD": {
      "symbol": "XAU-USD",
      "price": 2650.45,
      "timestamp": 1705500000.1,
      "sources": 6,
      "details": ["Binance", "GoldPrice.org", "Yahoo Finance"],
      "fastest": "Binance",
      "avgLatency": 150.5
    }
  }
}
```

### WebSocket

#### `WS /ws/stream`

è¨‚é–±å¯¦æ™‚åƒ¹æ ¼æ›´æ–°ã€‚é€£ç·šå¾Œè‡ªå‹•æ¨é€æ‰€æœ‰è³‡ç”¢çš„æ›´æ–°ã€‚

**èªè­‰æ–¹å¼ï¼š**

- Query: `ws://localhost:8000/ws/stream?api_key=<YOUR_API_KEY>`
- æˆ–åœ¨ Header å¸¶ `X-API-Key`

**æ¨é€è¨Šæ¯æ ¼å¼ï¼š**

```json
{
  "symbol": "XAU-USD",
  "price": 2650.45,
  "timestamp": 1705500000.1,
  "sources": 6,
  "details": ["Binance", "GoldPrice.org"],
  "fastest": "Binance",
  "avgLatency": 150.5
}
```

### Metrics

#### `GET /api/v1/metrics`

å›å‚³æœå‹™é‹è¡ŒæŒ‡æ¨™ï¼ˆä¾†æºæˆåŠŸ/å¤±æ•—ã€å¹³å‡å»¶é²ã€èšåˆæ¬¡æ•¸ç­‰ï¼‰ã€‚

**å›æ‡‰ç¯„ä¾‹ï¼š**

```json
{
  "startTime": 1705500000.0,
  "uptimeSeconds": 120.5,
  "totals": {
    "sourceSuccess": 1200,
    "sourceFailure": 12,
    "aggregateSuccess": 360
  },
  "sources": {
    "Binance": { "success": 300, "failure": 2, "avgLatencyMs": 42.1 }
  },
  "aggregates": {
    "XAU-USD": { "count": 120, "avgLatencyMs": 160.3, "lastSources": 6 }
  }
}
```

### ç®¡ç†ç«¯ (Admin)

**èªè­‰æ–¹å¼ï¼š**

- Header: `X-API-Key: <ADMIN_API_KEY>`

#### `GET /api/v1/admin/keys`

åˆ—å‡ºæ‰€æœ‰ API Key åŠå…¶åœç”¨ç‹€æ…‹ã€‚

> Redis æ–°å¢/ç§»é™¤çš„ key åªåœ¨æœ¬æ¬¡æœå‹™æœŸé–“ç”Ÿæ•ˆï¼›è«‹åŒæ­¥åˆ° `.env` ä¸¦é‡å•Ÿä»¥æŒä¹…åŒ–ã€‚

#### `POST /api/v1/admin/keys/disable`

åœç”¨æŒ‡å®š API Keyã€‚

```json
{ "key": "fr_xxx" }
```

#### `POST /api/v1/admin/keys/enable`

å•Ÿç”¨æŒ‡å®š API Keyã€‚

```json
{ "key": "fr_xxx" }
```

#### `POST /api/v1/admin/keys/add`

æ–°å¢ API Keyï¼ˆå¯«å…¥ Redisï¼‰ã€‚

```json
{ "key": "fr_xxx" }
```

#### `POST /api/v1/admin/keys/remove`

ç§»é™¤ Redis å…§çš„ API Keyï¼ˆ`.env` å…§çš„ key éœ€æ‰‹å‹•ç§»é™¤ä¸¦é‡å•Ÿï¼‰ã€‚

```json
{ "key": "fr_xxx" }
```

---

## ğŸ“Š æ•¸æ“šæºé…ç½®

| ä¾†æº                  | é¡å‹       | è¼ªè©¢é–“éš” | åç§»é‡ | æ¬Šé‡ | æ”¯æ´è³‡ç”¢          |
| --------------------- | ---------- | -------- | ------ | ---- | ----------------- |
| **Binance**           | Crypto API | 2s       | 0s     | 0.8  | XAU               |
| **GoldPrice.org**     | JSON API   | 15s      | 1s     | 0.6  | XAU, XAG          |
| **æ–°æµªè²¡ç¶“**          | HTTP       | 5s       | 0.5s   | 0.6  | XAU, XAG, USD-TWD |
| **BullionVault**      | XML API    | 10s      | 2s     | 0.7  | XAU               |
| **Yahoo Finance**     | REST API   | 60s      | 5s     | 0.5  | XAU, XAG, USD-TWD |
| **Kitco**             | HTML çˆ¬èŸ²  | 60s      | 10s    | 0.4  | XAU, XAG          |
| **Investing.com**     | Playwright | 120s     | 15s    | 0.5  | XAU, XAG, USD-TWD |
| **OANDA**             | REST API   | 5s       | 3s     | 0.8  | XAU, XAG, USD-TWD |
| **Taiwan Bank**       | CSV        | 60s      | 20s    | 0.7  | USD-TWD           |
| **exchangerate.host** | REST API   | 30s      | 12s    | 0.5  | USD-TWD           |
| **open.er-api.com**   | REST API   | 60s      | 25s    | 0.5  | USD-TWD           |
| **Mock**              | æ¸¬è©¦       | 2s       | 0s     | 0.3  | å…¨éƒ¨              |

### å¯åŠ å…¥çš„å…è²»å³æ™‚åŒ¯ç‡ä¾†æºï¼ˆå€™é¸ï¼‰

ä»¥ä¸‹ç‚ºå¯è©•ä¼°åŠ å…¥çš„å…è²»ä¾†æºï¼ˆå¤šæ•¸æœ‰é »ç‡é™åˆ¶æˆ–éœ€ç”³è«‹å…è²»é‡‘é‘°ï¼‰ï¼š

- exchangerate.hostï¼ˆå·²åŠ å…¥ï¼‰
- open.er-api.comï¼ˆå·²åŠ å…¥ï¼‰
- frankfurter.appï¼ˆECB ä¾†æºï¼Œé©åˆéé«˜é »ç”¨é€”ï¼‰
- tw.rter.infoï¼ˆåŒ¯ç‡èšåˆç«™é»ï¼Œéœ€æ³¨æ„ä½¿ç”¨æ¢æ¬¾ï¼‰
- å„éŠ€è¡Œå…¬é–‹ç‰Œå‘Š CSV/HTMLï¼ˆå¤šç‚ºåˆ†é˜ç´šæ›´æ–°ï¼‰

### æ™‚é–“åˆ†ç‰‡èªªæ˜

ç‚ºé¿å…åŒæ™‚è«‹æ±‚é€ æˆ IP å°é–ï¼Œå„ä¾†æºæŒ‰åç§»é‡ (Offset) éŒ¯é–‹ï¼š

```
T=0.0s: Binance è«‹æ±‚
T=0.5s: æ–°æµªè²¡ç¶“ è«‹æ±‚
T=1.0s: GoldPrice.org è«‹æ±‚
T=2.0s: BullionVault è«‹æ±‚
T=3.0s: Kitco è«‹æ±‚
T=4.0s: Investing.com è«‹æ±‚
T=5.0s: Yahoo Finance è«‹æ±‚
...
```

---

## ğŸ–¥ï¸ å‰ç«¯åŠŸèƒ½

### å„€è¡¨æ¿ (Dashboard)

1. **å¤šè³‡ç”¢å³æ™‚çœ‹æ¿**
   - ä¸‰æ¬„å¼ Grid ä½ˆå±€ï¼šé»ƒé‡‘ã€ç™½éŠ€ã€ç¾å…ƒåŒ¯ç‡
   - åƒ¹æ ¼è®Šå‹•æ™‚èƒŒæ™¯é–ƒçˆå‹•ç•« (ç¶ æ¼²/ç´…è·Œ)
   - é¡¯ç¤ºæ¼²è·Œå¹…ç™¾åˆ†æ¯”

2. **ä¾†æºæ­¸å› é¡¯ç¤º**
   - é¡¯ç¤ºç•¶å‰åƒ¹æ ¼ç”±å“ªå€‹ä¾†æºè²¢ç»
   - é¡¯ç¤ºå¹³å‡å»¶é² (ms)

- 10 æ ¼é€²åº¦æ¢é¡¯ç¤ºæ´»èºä¾†æºæ•¸é‡

3. **é€£ç·šç‹€æ…‹æŒ‡ç¤º**
   - ç¶ ç‡ˆï¼šWebSocket å·²é€£æ¥
   - ç´…ç‡ˆï¼šé€£ç·šä¸­...

### API æ–‡æª” (Docs)

- å…§åµŒæ–¼å„€è¡¨æ¿çš„ API èªªæ˜é é¢
- æä¾› cURL, Python, JavaScript ä»£ç¢¼ç¯„ä¾‹
- ä¸€éµè¤‡è£½åŠŸèƒ½

---

## âš™ï¸ é…ç½®èªªæ˜

### ç’°å¢ƒè®Šæ•¸ (`.env`)

```env
# Redis é…ç½® (å¯é¸ï¼Œæœªé…ç½®æ™‚ä½¿ç”¨ FakeRedis)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

# æ‡‰ç”¨é…ç½®
APP_NAME=FlashRates Aggregator
DEBUG=false

# API èªè­‰
API_KEYS=dev-key-1,dev-key-2
ADMIN_API_KEYS=admin-key-1

# Rate Limit (æ¯åˆ†é˜ + çªç™¼)
RATE_LIMIT_PER_MINUTE=120
RATE_LIMIT_BURST=30
```

### Vite é…ç½® (`frontend/vite.config.js`)

```javascript
export default defineConfig({
  plugins: [react(), tailwindcss()],
  server: {
    port: 7000, // å‰ç«¯å›ºå®šä½¿ç”¨ Port 7000
  },
});
```

---

## ğŸ§ª é–‹ç™¼æŒ‡å—

### é‹è¡Œæ¸¬è©¦

```bash
cd FlashRates
python -m pytest tests/test_system.py -v
```

### æ–°å¢æ•¸æ“šæº

1. åœ¨ `backend/sources/` å»ºç«‹æ–°æª”æ¡ˆï¼Œç¹¼æ‰¿ `BaseSource`
2. å¯¦ä½œ `fetch_price(symbol)` æ–¹æ³•
3. åœ¨ `backend/main.py` ä¸­åŠ å…¥åˆ° `sources` åˆ—è¡¨
4. åœ¨ `backend/scheduler.py` çš„ `SOURCE_CONFIG` åŠ å…¥è¼ªè©¢é…ç½®

### æ ¸å¿ƒé¡åˆ¥

| é¡åˆ¥             | æª”æ¡ˆ                 | è·è²¬                  |
| ---------------- | -------------------- | --------------------- |
| `BaseSource`     | `sources/base.py`    | æ•¸æ“šæºæŠ½è±¡åŸºé¡        |
| `Aggregator`     | `aggregator.py`      | åŠ æ¬Šå¹³å‡ + ç•°å¸¸å€¼éæ¿¾ |
| `Scheduler`      | `scheduler.py`       | æ™‚é–“åˆ†ç‰‡èª¿åº¦          |
| `CircuitBreaker` | `circuit_breaker.py` | ç†”æ–·æ©Ÿåˆ¶              |
| `RedisClient`    | `redis_client.py`    | Redis æ“ä½œå°è£        |

---

## ğŸ“œ ç‰ˆæœ¬æ­·å²

| ç‰ˆæœ¬ | æ—¥æœŸ       | èªªæ˜                  |
| ---- | ---------- | --------------------- |
| v2.0 | 2026-01-17 | å®Œæ•´å¯¦ä½œ 8 æºèšåˆç³»çµ± |
| v1.0 | -          | åŸå§‹è¦æ ¼è¨­è¨ˆ          |

---

## ğŸ“ å¾…è¾¦äº‹é …

- [ ] å¯¦ä½œ Investing.com Playwright çˆ¬èŸ² (éœ€è¦ playwright-stealth)
- [ ] æ–°å¢ OANDA WebSocket å¯¦æ™‚æ¨é€
- [ ] å¯¦ä½œå°ç£éŠ€è¡ŒåŒ¯ç‡ç‰Œå‘Šå‚™æ´
- [ ] æ–°å¢ IP ä»£ç†æ±  (Proxy Pool)
- [ ] éƒ¨ç½²è‡³ç”Ÿç”¢ç’°å¢ƒ (Nginx + Supervisord)

---

## ğŸ“„ æˆæ¬Š

MIT License
